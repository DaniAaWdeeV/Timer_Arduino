// Пины управления семисегментным индикатором
#define bottom_left 13
#define bottom_bottom 12
#define bottom_right 10
#define point 9
#define top_right 8
#define top_top 7
#define top_left 6
#define middle_middle 5
// Пин принимает сигнал от кнопки
#define button_in 2

void show_no(){
  // Нижние сегменты
  digitalWrite(bottom_left, LOW);
  digitalWrite(bottom_bottom, LOW);
  digitalWrite(bottom_right, LOW);
  // Точка
  digitalWrite(point, LOW);
  // Верхние
  digitalWrite(top_right, LOW);
  digitalWrite(top_top, LOW);
  digitalWrite(top_left, LOW);
  // Средний
  digitalWrite(middle_middle, LOW);
}
void show_0(){
  // Нижние сегменты
  digitalWrite(bottom_left, HIGH);
  digitalWrite(bottom_bottom, HIGH);
  digitalWrite(bottom_right, HIGH);
  // Точка
  digitalWrite(point, LOW);
  // Верхние
  digitalWrite(top_right, HIGH);
  digitalWrite(top_top, HIGH);
  digitalWrite(top_left, HIGH);
  // Средний
  digitalWrite(middle_middle, LOW);
}
void show_1(){
  // Нижние сегменты
  digitalWrite(bottom_left, LOW);
  digitalWrite(bottom_bottom, LOW);
  digitalWrite(bottom_right, HIGH);
  // Точка
  digitalWrite(point, LOW);
  // Верхние
  digitalWrite(top_right, HIGH);
  digitalWrite(top_top, LOW);
  digitalWrite(top_left, LOW);
  // Средний
  digitalWrite(middle_middle, LOW);
}
void show_2(){
  // Нижние сегменты
  digitalWrite(bottom_left, HIGH);
  digitalWrite(bottom_bottom, HIGH);
  digitalWrite(bottom_right, LOW);
  // Точка
  digitalWrite(point, LOW);
  // Верхние
  digitalWrite(top_right, HIGH);
  digitalWrite(top_top, HIGH);
  digitalWrite(top_left, LOW);
  // Средний
  digitalWrite(middle_middle, HIGH);  
}
void show_3(){
  // Нижние сегменты
  digitalWrite(bottom_left, LOW);
  digitalWrite(bottom_bottom, HIGH);
  digitalWrite(bottom_right, HIGH);
  // Точка
  digitalWrite(point, LOW);
  // Верхние
  digitalWrite(top_right, HIGH);
  digitalWrite(top_top, HIGH);
  digitalWrite(top_left, LOW);
  // Средний
  digitalWrite(middle_middle, HIGH);
}
void show_4(){
  // Нижние сегменты
  digitalWrite(bottom_left, LOW);
  digitalWrite(bottom_bottom, LOW);
  digitalWrite(bottom_right, HIGH);
  // Точка
  digitalWrite(point, LOW);
  // Верхние
  digitalWrite(top_right, HIGH);
  digitalWrite(top_top, LOW);
  digitalWrite(top_left, HIGH);
  // Средний
  digitalWrite(middle_middle, HIGH);
}
void show_5(){
  // Нижние сегменты
  digitalWrite(bottom_left, LOW);
  digitalWrite(bottom_bottom, HIGH);
  digitalWrite(bottom_right, HIGH);
  // Точка
  digitalWrite(point, LOW);
  // Верхние
  digitalWrite(top_right, LOW);
  digitalWrite(top_top, HIGH);
  digitalWrite(top_left, HIGH);
  // Средний
  digitalWrite(middle_middle, HIGH);
}
void show_6(){
  // Нижние сегменты
  digitalWrite(bottom_left, HIGH);
  digitalWrite(bottom_bottom, HIGH);
  digitalWrite(bottom_right, HIGH);
  // Точка
  digitalWrite(point, LOW);
  // Верхние
  digitalWrite(top_right, LOW);
  digitalWrite(top_top, HIGH);
  digitalWrite(top_left, HIGH);
  // Средний
  digitalWrite(middle_middle, HIGH);
}
void show_7(){
  // Нижние сегменты
  digitalWrite(bottom_left, LOW);
  digitalWrite(bottom_bottom, LOW);
  digitalWrite(bottom_right, HIGH);
  // Точка
  digitalWrite(point, LOW);
  // Верхние
  digitalWrite(top_right, HIGH);
  digitalWrite(top_top, HIGH);
  digitalWrite(top_left, LOW);
  // Средний
  digitalWrite(middle_middle, LOW);
}
void show_8(){
  // Нижние сегменты
  digitalWrite(bottom_left, HIGH);
  digitalWrite(bottom_bottom, HIGH);
  digitalWrite(bottom_right, HIGH);
  // Точка
  digitalWrite(point, LOW);
  // Верхние
  digitalWrite(top_right, HIGH);
  digitalWrite(top_top, HIGH);
  digitalWrite(top_left, HIGH);
  // Средний
  digitalWrite(middle_middle, HIGH);
}
void show_9(){
  // Нижние сегменты
  digitalWrite(bottom_left, LOW);
  digitalWrite(bottom_bottom, HIGH);
  digitalWrite(bottom_right, HIGH);
  // Точка
  digitalWrite(point, LOW);
  // Верхние
  digitalWrite(top_right, HIGH);
  digitalWrite(top_top, HIGH);
  digitalWrite(top_left, HIGH);
  // Средний
  digitalWrite(middle_middle, HIGH);
}


void setup() {
  // Нижние сегменты
  pinMode(bottom_left, OUTPUT);  //
  pinMode(bottom_bottom, OUTPUT);
  pinMode(bottom_right, OUTPUT);
  
  // Точка
  pinMode(point, OUTPUT);

  // Верхние
  pinMode(top_right, OUTPUT);
  pinMode(top_top, OUTPUT);
  pinMode(top_left, OUTPUT);

  // Средний
  pinMode(middle_middle, OUTPUT);

  // Вход с кнопки: Нажата -> 1; Отпущена -> 0;
  pinMode(button_in, INPUT);
  
  // Обмен данными по COM
  Serial.begin(9600);
}

void loop() {
  // Таймер считает от 9 до 0 после нажатия кнопки
  // Длительность показа цифры 1 секунда
  boolean start_count = digitalRead(button_in);

  Serial.print("Состояние кнопки: ");
  Serial.println(start_count);
  
  if (start_count == LOW){
    for(int i = 9; i >= 0; i--){
        Serial.print("Текущее значение i: ");
        Serial.println(i);
        switch(i){
          case 9:{
            show_9();
            break;
          }
          case 8:{
            show_8();
            break;
          }
          case 7:{
            show_7();
            break;
          }
          case 6:{
            show_6();
            break;
          }
          case 5:{
            show_5();
            break;
          }
          case 4:{
            show_4();
            break;
          }
          case 3:{
            show_3();
            break;
          }
          case 2:{
            show_2();
            break;
          }
          case 1:{
            show_1();
            break;
          }
          case 0:{
            show_0();
            break;
          }
        }
        delay(1000);
    }
  }
  else{
    show_no();
  }

}
